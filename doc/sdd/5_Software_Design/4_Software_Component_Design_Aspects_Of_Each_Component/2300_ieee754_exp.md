### \_\_ieee754\_exp {#sec:component-ieee-exp}

\begin{sffamily}\small
	\begin{center}
		\begin{tabularx}{\dimexpr\textwidth-1\tabcolsep}{p{2.3cm}X}
			Interface       & \texttt{double \_\_ieee754\_exp(double x)} \\ 
			
			Type & Internal Procedure    \\ 
			
			Files & \texttt{libm/math/e\_exp.c}    \\ 
			
			Subordinates and Superiors &
			\raisebox{-1\height}{\includegraphics[]{./figure/Declaration-__ieee754_exp.png}}    \\ 
			
			Purpose & 
			The internal \texttt{\_\_ieee754\_exp} function shall return $e^x$. \newline
			This component does not implement software requirements by itself.    \\ 
			
			References & \texttt{\_\_ieee754\_expf} \ref{sec:component-ieee-expf}, \texttt{exp} \ref{sec:component-exp}    \\ 
		\end{tabularx}
	\end{center}
\end{sffamily}

#### Procedure Design

\begin{compactenum}
	\item If x is \texttt{NaN}, return x+x.
	\item If x is positive infinity, return x.
	\item If x is negative infinity, return 0.
	\item If $e^x$ produces an overflow, return positive infinity\footnote{This is the case when x is > \texttt{0x40862E42FEFA39EF} (7.09782712893383973096 $\cdot 10^2$).}, with overflow.
	\item If $e^x$ produces an underflow, return 0\footnote{This is the case when x is < \texttt{0xC0874910D52D3051} (-7.45133219101941108420 $\cdot 10^2$).}, with underflow.\footnote{For optimization the steps 1 through 5 can be combined in a single if-statement using |x| >= the overflow threshold, therefore making the execution time of non-special cases shorter.}
	\item If |x| < $2^{-28}$, return 1, with inexact.\footnote{This is faster than the calculation and the result would be indistinguishable from 1 using double precision.}
	\item If |x| > 0.5 $\cdot$ ln(2), an argument reduction is necessary. Given x find r and integer k such that the formula
		\begin{align}
			x = k \cdot ln(2) + r \wedge |r| <= 0.5 \cdot ln(2)
		\end{align}
		holds true. To increase accuracy save r using two double precision floating point values.
	\item If no argument reduction was necessary in step 7, r equals x.
	\item Calculate $e^r$ with the following formulae using Horner's method:
		\begin{gather}
			c = r - P1 \cdot r^2 - P2 \cdot r^4 - P3 \cdot r^6 - P4 \cdot r^8 - P5 \cdot r^{10} \\
			e^r = 1 - \frac{r \cdot c}{c - 2} - r
		\end{gather}
		with
		\begin{compactitem}
			\item $P1$ = \texttt{0x3FC555555555553E} (1.66666666666666019037 $\cdot 10^{-1}$)
			\item $P2$ = \texttt{0xBF66C16C16BEBD93} (-2.77777777770155933842 $\cdot 10^{-3}$)
			\item $P3$ = \texttt{0x3F11566AAF25DE2C} (6.61375632143793436117 $\cdot 10^{-5}$)
			\item $P4$ = \texttt{0xBEBBBD41C5D26BF1} (-1.65339022054652515390 $\cdot 10^{-6}$)
			\item $P5$ = \texttt{0x3E66376972BEA4D0} (4.13813679705723846039 $\cdot 10^{-8}$)
		\end{compactitem}
	\item If no argument reduction was necessary in step 7, return $e^r$.
	\item Use the formula 
		\begin{align}
			e^x = 2^k \cdot e^r
		\end{align}
		to scale back from r to x, and return the calculated value for $e^x$.
\end{compactenum}

\begin{figure}[H]
	\centering
	\includegraphics[width=0.55\textwidth]{./figure/Ieee_Exp_Flowchart.pdf}
	\caption{Flowchart \_\_ieee754\_exp}
	\label{fig:flowchart-ieee_exp}
\end{figure}