### \_\_ieee754\_log10 {#sec:component-ieee-log10}

\begin{sffamily}\small
	\begin{center}
		\begin{tabularx}{\dimexpr\textwidth-1\tabcolsep}{p{2.3cm}X}
			Interface       & \texttt{double \_\_ieee754\_log10(double x)} \\ 
			
			Type & Internal Procedure    \\ 
			
			Files & \texttt{libm/math/e\_log10.c}    \\ 
			
			Subordinates and Superiors &
			\raisebox{-1\height}{\includegraphics[]{./figure/Declaration-__ieee754_log10.png}}    \\ 
			
			Purpose & 
			The internal \texttt{\_\_ieee754\_log10} function shall return $\log_{10}{x}$. \newline
			This component does not implement software requirements by itself.    \\ 
			
			References & \texttt{\_\_ieee754\_log10f} \ref{sec:component-ieee-log10f}, \texttt{log10} \ref{sec:component-log10}, \texttt{\_\_kernel\_log} \ref{sec:component-kernel-log}    \\ 
		\end{tabularx}
	\end{center}
\end{sffamily}

#### Procedure Design

\begin{compactenum}
	\item If x is \texttt{NaN} or positive infinity, return x+x.
	\item If x is a zero, return negative infinity.
	\item If x is negative, return \texttt{NaN}.
	\item If x is subnormal, scale up by multiplying with $2^{54}$.
	\item Given x find f and integer k such that the formulae
	\begin{gather}
		x = 2^k \cdot (1 + f)  \label{formula_log10_1} \\
		\frac{\sqrt{2}}{2} < (1 + f) < \sqrt{2} \label{formula_log10_2}
	\end{gather}
	hold true.\footnote{Use \texttt{mantissa part of highword} + \texttt{0x95f64} to find k.}
	\item Return the result of:
	\begin{align}
		hfsq &= \frac{f^2}{2} \nonumber \\
		r &= \texttt{\_\_kernel\_log}(f) \nonumber \\
		hi &= f - hfsq,\ with\ the\ lowword\ masked\ off \nonumber \\
		lo &= (f - hi) - hfsq + r \nonumber \\
		z &= k \cdot Log_{10}2_{hi} \nonumber \\
		w &= z + hi \cdot invln10_{hi} \nonumber \\
		log_{10}{x} &= \Big(\big(k \cdot Log_{10}2_{lo} + (lo + hi) \cdot invln10_{lo} + lo \cdot invln10_{hi}\big) \nonumber \\
			&\qquad + (z - w) + hi \cdot invln10_{hi}\Big) + w \label{formula_log10_3}
	\end{align}
	with
	\begin{compactitem}
		\item $invln10_{hi}$ = \texttt{0x3FDBCB7B15200000} (4.34294481878168880939 $\cdot 10^{-1}$)
		\item $invln10_{lo}$ = \texttt{0x3DBB9438CA9AADD5} (2.50829467116452752298 $\cdot 10^{-11}$)
		\item $Log_{10}2_{hi}$ = \texttt{0x3FD34413509F6000} (3.01029995663611771306 $\cdot 10^{-1}$)
		\item $Log_{10}2_{lo}$ = \texttt{0x3D59FEF311F12B36} (3.69423907715893078616 $\cdot 10^{-13}$)
	\end{compactitem}
\end{compactenum}

\begin{figure}[H]
	\centering
	\includegraphics[width=0.6\textwidth]{./figure/Ieee_Log10_Flowchart.pdf}
	\caption{Flowchart \_\_ieee754\_log10}
	\label{fig:flowchart-ieee_log10}
\end{figure}